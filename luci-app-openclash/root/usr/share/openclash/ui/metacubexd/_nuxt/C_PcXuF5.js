import{$ as e,Dt as t,E as n,Et as r,G as i,H as a,J as o,K as s,Ot as ee,Q as c,R as l,V as te,W as u,ct as d,et as f,ft as p,ht as ne,j as re,kt as m,pt as h,q as g,st as _,ut as ie,x as ae,yt as v,z as oe}from"./CM_088kD.js";import{u as y}from"./_v7-ePgP.js";import{t as se}from"./Cdiy0J91.js";import{_ as ce,c as le,d as ue,j as b,l as de,n as x,s as fe,t as S,v as pe}from"./BJ759pwc.js";import{t as C}from"./BLNk-Hhf.js";import{t as me}from"./D9Xz31Em.js";import{t as he}from"./BDLrSyiE.js";var w={class:`flex h-full min-h-0 flex-col gap-3`},T={class:`flex shrink-0 items-center gap-3`},E={class:`relative flex-1`},D=[`placeholder`],O={class:`flex gap-2`},k={class:`min-h-0 flex-1 overflow-auto rounded-xl border border-base-content/10 bg-base-200/50`},A={class:`sticky top-0 z-10 bg-base-200`},j={class:`flex items-center gap-2`},M=[`onClick`],N=[`onClick`],P=[`onClick`],F=[`colspan`],I={class:`flex items-center gap-2 text-primary`},L={class:`font-semibold`},R={class:`text-xs text-base-content/60`},ge={key:0,class:`flex flex-col items-center justify-center gap-4 px-4 py-12 text-base-content/40`},_e={class:`flex flex-col gap-5`},ve={class:`flex flex-col gap-2`},ye={class:`text-sm font-medium text-base-content/70`},be={value:`xs`},xe={value:`sm`},Se={value:`md`},Ce={value:`lg`},we={class:`flex flex-col gap-2`},Te={class:`text-sm font-medium text-base-content/70`},z={value:`info`},Ee={value:`error`},De={value:`warning`},Oe={value:`debug`},ke={value:`silent`},Ae={class:`flex flex-col gap-2`},je={class:`text-sm font-medium text-base-content/70`},B=C(e({__name:`logs`,setup(e){let{t:C}=ae();re({title:u(()=>C(`logs`))});let B=me(),V=se(),H=v(``),U=v();function W(e){return e.match(/^\[([^\]]+)\]/)?.[1]??``}function Me(e){switch(e){case y.Error:return`text-error font-semibold`;case y.Warning:return`text-warning font-semibold`;case y.Info:return`text-info font-semibold`;case y.Debug:return`text-success font-semibold`;default:return``}}let G=[{id:`seq`,label:C(`sequence`),sortable:!0,groupable:!1,render:e=>String(e.seq),sortValue:e=>e.seq},{id:`level`,label:C(`level`),sortable:!0,groupable:!0,render:e=>f(`span`,{class:Me(e.type)},`[${e.type}]`),sortValue:e=>e.type,groupValue:e=>e.type},{id:`type`,label:C(`type`),sortable:!0,groupable:!0,render:e=>f(`span`,{class:`text-base-content/60`},W(e.payload)),sortValue:e=>W(e.payload),groupValue:e=>W(e.payload)||`(empty)`},{id:`payload`,label:C(`payload`),sortable:!1,groupable:!1,render:e=>e.payload}],K=n(`logsTableSortColumn`,`seq`),q=n(`logsTableSortDesc`,!0),J=n(`logsTableGrouping`,null),Y=v({}),X=u(()=>{if(!H.value)return B.logs;let e=H.value.toLowerCase();return B.logs.filter(t=>t.payload.toLowerCase().includes(e)||t.type.toLowerCase().includes(e)||W(t.payload).toLowerCase().includes(e))}),Z=u(()=>{let e=G.find(e=>e.id===K.value);return e?.sortValue?[...X.value].sort((t,n)=>{let r=e.sortValue(t),i=e.sortValue(n),a=0;return typeof r==`number`&&typeof i==`number`?a=r-i:typeof r==`string`&&typeof i==`string`&&(a=r.localeCompare(i)),q.value?-a:a}):X.value}),Ne=u(()=>J.value?G.find(e=>e.id===J.value):null),Q=u(()=>{let e=Ne.value;if(!e?.groupValue)return Z.value.map(e=>({type:`data`,original:e}));let t=new Map;for(let n of Z.value){let r=e.groupValue(n),i=t.get(r);i?i.push(n):t.set(r,[n])}let n=[];for(let[e,r]of t)if(n.push({type:`group`,key:e,subRows:r}),Y.value[e])for(let e of r)n.push({type:`data`,original:e});return n});function Pe(e){return G.find(t=>t.id===e)?.sortable??!1}function $(e){return K.value===e}function Fe(e){G.find(t=>t.id===e)?.sortable&&(K.value===e?q.value?q.value=!1:(K.value=``,q.value=!0):(K.value=e,q.value=!0))}function Ie(e){J.value===e?J.value=null:J.value=e,Y.value={}}function Le(e){Y.value[e]=!Y.value[e]}let Re=u(()=>V.tableSizeClassName(V.logsTableSize));return(e,n)=>{let u=he;return _(),o(`div`,w,[i(`div`,T,[i(`div`,E,[c(r(ue),{class:`pointer-events-none absolute top-1/2 left-3.5 -translate-y-1/2 text-base-content/40`,size:18}),h(i(`input`,{"onUpdate:modelValue":n[0]||=e=>ne(H)?H.value=e:null,type:`search`,class:`w-full rounded-lg border border-base-content/10 bg-base-200/60 py-2.5 pr-3.5 pl-10 text-sm text-base-content transition-all duration-200 placeholder:text-base-content/40 focus:border-primary focus:bg-base-100 focus:ring-3 focus:ring-primary/15 focus:outline-none`,placeholder:r(C)(`search`)},null,8,D),[[oe,r(H)]])]),i(`div`,O,[i(`button`,{class:t([`flex h-9 w-9 cursor-pointer items-center justify-center rounded-lg border border-base-content/10 bg-base-200/60 text-base-content transition-all duration-200 hover:border-base-content/20 hover:bg-base-300`,{"border-warning/30 bg-warning/15 text-warning":r(B).paused}]),onClick:n[1]||=e=>r(B).togglePaused()},[r(B).paused?(_(),s(r(ce),{key:1,size:18})):(_(),s(r(pe),{key:0,size:18}))],2),i(`button`,{class:`flex h-9 w-9 cursor-pointer items-center justify-center rounded-lg border border-base-content/10 bg-base-200/60 text-base-content transition-all duration-200 hover:border-base-content/20 hover:bg-base-300`,onClick:n[2]||=e=>r(U)?.open()},[c(r(de),{size:18})])])]),i(`div`,k,[i(`table`,{class:t([`table w-full border-collapse whitespace-nowrap`,r(Re)])},[i(`thead`,null,[i(`tr`,A,[(_(),o(a,null,d(G,e=>i(`th`,{key:e.id,class:`border-b border-base-content/10 text-left font-semibold text-base-content`},[i(`div`,j,[i(`div`,{class:t([`flex-1`,{"cursor-pointer select-none hover:text-primary":Pe(e.id)}]),onClick:t=>Fe(e.id)},m(e.label),11,M),$(e.id)&&!r(q)?(_(),s(r(le),{key:0,class:`text-primary`,size:16})):$(e.id)&&r(q)?(_(),s(r(fe),{key:1,class:`text-primary`,size:16})):g(``,!0),e.groupable?(_(),o(`button`,{key:2,class:`flex cursor-pointer items-center justify-center border-none bg-transparent p-1 text-base-content/60 transition-colors duration-200 hover:text-primary`,onClick:te(t=>Ie(e.id),[`stop`])},[r(J)===e.id?(_(),s(r(S),{key:0,size:16})):(_(),s(r(x),{key:1,size:16}))],8,N)):g(``,!0)])])),64))])]),i(`tbody`,null,[(_(!0),o(a,null,d(r(Q),(e,t)=>(_(),o(a,{key:e.type===`group`?`group-${e.key}`:e.original.seq},[e.type===`group`?(_(),o(`tr`,{key:0,class:`cursor-pointer bg-primary/5 hover:bg-primary/10`,onClick:t=>Le(e.key)},[i(`td`,{colspan:G.length,class:`border-b border-base-content/10`},[i(`div`,I,[r(Y)[e.key]?(_(),s(r(S),{key:0,size:16})):(_(),s(r(x),{key:1,size:16})),i(`span`,L,m(e.key),1),i(`span`,R,`(`+m(e.subRows.length)+`)`,1)])],8,F)],8,P)):(_(),o(`tr`,{key:1,class:`animate-fade-in transition-colors duration-150 hover:bg-base-content/5`,style:ee({animationDelay:`${t%20*15}ms`})},[(_(),o(a,null,d(G,t=>i(`td`,{key:t.id,class:`border-b border-base-content/5`},[(_(),s(ie(()=>t.render(e.original))))])),64))],4))],64))),128))])],2),r(Q).length===0?(_(),o(`div`,ge,[c(r(b),{size:48,class:`opacity-50`}),i(`span`,null,m(r(C)(`noData`)),1)])):g(``,!0)]),c(u,{ref_key:`settingsModal`,ref:U,title:r(C)(`logsSettings`)},{icon:p(()=>[c(r(b),{size:24})]),default:p(()=>[i(`div`,_e,[i(`div`,ve,[i(`label`,ye,m(r(C)(`tableSize`)),1),h(i(`select`,{"onUpdate:modelValue":n[3]||=e=>r(V).logsTableSize=e,class:`w-full cursor-pointer rounded-lg border border-base-content/10 bg-base-100 px-3.5 py-2.5 text-sm text-base-content transition-colors duration-200 focus:border-primary focus:outline-none`},[i(`option`,be,m(r(C)(`xs`)),1),i(`option`,xe,m(r(C)(`sm`)),1),i(`option`,Se,m(r(C)(`md`)),1),i(`option`,Ce,m(r(C)(`lg`)),1)],512),[[l,r(V).logsTableSize]])]),i(`div`,we,[i(`label`,Te,m(r(C)(`logLevel`)),1),h(i(`select`,{"onUpdate:modelValue":n[4]||=e=>r(V).logLevel=e,class:`w-full cursor-pointer rounded-lg border border-base-content/10 bg-base-100 px-3.5 py-2.5 text-sm text-base-content transition-colors duration-200 focus:border-primary focus:outline-none`},[i(`option`,z,m(r(C)(`info`)),1),i(`option`,Ee,m(r(C)(`error`)),1),i(`option`,De,m(r(C)(`warning`)),1),i(`option`,Oe,m(r(C)(`debug`)),1),i(`option`,ke,m(r(C)(`silent`)),1)],512),[[l,r(V).logLevel]])]),i(`div`,Ae,[i(`label`,je,m(r(C)(`logMaxRows`)),1),h(i(`select`,{"onUpdate:modelValue":n[5]||=e=>r(V).logMaxRows=e,class:`w-full cursor-pointer rounded-lg border border-base-content/10 bg-base-100 px-3.5 py-2.5 text-sm text-base-content transition-colors duration-200 focus:border-primary focus:outline-none`},[...n[6]||=[i(`option`,{value:200},`200`,-1),i(`option`,{value:300},`300`,-1),i(`option`,{value:500},`500`,-1),i(`option`,{value:800},`800`,-1),i(`option`,{value:1e3},`1000`,-1)]],512),[[l,r(V).logMaxRows]])])])]),_:1},8,[`title`])])}}}),[[`__scopeId`,`data-v-d01ccdcc`]]);export{B as default};