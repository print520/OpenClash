import{$ as e,A as t,Dt as n,E as r,Et as i,G as a,H as o,J as s,K as c,Mt as l,Q as u,R as d,T as f,V as p,W as m,Z as h,ct as g,dt as _,et as v,ft as y,ht as ee,j as b,k as x,kt as S,pt as te,q as C,rt as w,st as T,ut as E,w as D,wt as O,x as k,yt as A,z as ne}from"./C4vawhhX.js";import{i as j,n as M,r as re}from"./_v7-ePgP.js";import{t as ie}from"./CzmD_A01.js";import"./Cjc33tXe.js";import{M as ae,N as oe,P as se,c as ce,g as le,h as ue,i as de,j as fe,l as pe,n as me,t as he,u as ge,v as _e,w as ve}from"./CEatu4QW.js";import{i as ye,r as be}from"./DUULT-b1.js";import{i as xe,n as Se,r as Ce,t as we}from"./CDK2uSw_.js";import{c as Te,h as Ee,o as De}from"./CTZ8NxUp.js";import{t as Oe}from"./BY6HYtMz.js";import{t as ke}from"./BaIHsnkQ.js";import{t as Ae}from"./7Wr_k_ga.js";function je(e){var t=typeof e;return e!=null&&(t==`object`||t==`function`)}var Me=je,Ne=`[object AsyncFunction]`,Pe=`[object Function]`,Fe=`[object GeneratorFunction]`,Ie=`[object Proxy]`;function Le(e){if(!Me(e))return!1;var t=Ce(e);return t==Pe||t==Fe||t==Ne||t==Ie}var Re=Le,ze=xe[`__core-js_shared__`],Be=function(){var e=/[^.]+$/.exec(ze&&ze.keys&&ze.keys.IE_PROTO||``);return e?`Symbol(src)_1.`+e:``}();function Ve(e){return!!Be&&Be in e}var He=Ve,Ue=Function.prototype.toString;function We(e){if(e!=null){try{return Ue.call(e)}catch{}try{return e+``}catch{}}return``}var Ge=We,Ke=/[\\^$.*+?()[\]{}|]/g,qe=/^\[object .+?Constructor\]$/,Je=Function.prototype,Ye=Object.prototype,Xe=Je.toString,Ze=Ye.hasOwnProperty,Qe=RegExp(`^`+Xe.call(Ze).replace(Ke,`\\$&`).replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,`$1.*?`)+`$`);function $e(e){return!Me(e)||He(e)?!1:(Re(e)?Qe:qe).test(Ge(e))}var et=$e;function tt(e,t){return e?.[t]}var nt=tt;function rt(e,t){var n=nt(e,t);return et(n)?n:void 0}var it=rt;function at(){}var ot=at;function st(e,t,n,r){for(var i=e.length,a=n+(r?1:-1);r?a--:++a<i;)if(t(e[a],a,e))return a;return-1}var ct=st;function lt(e){return e!==e}var ut=lt;function dt(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}var ft=dt;function pt(e,t,n){return t===t?ft(e,t,n):ct(e,ut,n)}var mt=pt;function ht(e,t){return!!(e!=null&&e.length)&&mt(e,t,0)>-1}var gt=ht;function _t(e,t){return e===t||e!==e&&t!==t}var vt=_t,yt=it(Object,`create`);function bt(){this.__data__=yt?yt(null):{},this.size=0}var xt=bt;function St(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Ct=St,wt=`__lodash_hash_undefined__`,Tt=Object.prototype.hasOwnProperty;function Et(e){var t=this.__data__;if(yt){var n=t[e];return n===wt?void 0:n}return Tt.call(t,e)?t[e]:void 0}var Dt=Et,Ot=Object.prototype.hasOwnProperty;function kt(e){var t=this.__data__;return yt?t[e]!==void 0:Ot.call(t,e)}var At=kt,jt=`__lodash_hash_undefined__`;function Mt(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=yt&&t===void 0?jt:t,this}var Nt=Mt;function Pt(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Pt.prototype.clear=xt,Pt.prototype.delete=Ct,Pt.prototype.get=Dt,Pt.prototype.has=At,Pt.prototype.set=Nt;var Ft=Pt;function It(){this.__data__=[],this.size=0}var Lt=It;function Rt(e,t){for(var n=e.length;n--;)if(vt(e[n][0],t))return n;return-1}var zt=Rt,Bt=Array.prototype.splice;function Vt(e){var t=this.__data__,n=zt(t,e);return n<0?!1:(n==t.length-1?t.pop():Bt.call(t,n,1),--this.size,!0)}var Ht=Vt;function Ut(e){var t=this.__data__,n=zt(t,e);return n<0?void 0:t[n][1]}var Wt=Ut;function Gt(e){return zt(this.__data__,e)>-1}var Kt=Gt;function qt(e,t){var n=this.__data__,r=zt(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}var Jt=qt;function Yt(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Yt.prototype.clear=Lt,Yt.prototype.delete=Ht,Yt.prototype.get=Wt,Yt.prototype.has=Kt,Yt.prototype.set=Jt;var Xt=Yt,Zt=it(xe,`Map`);function Qt(){this.size=0,this.__data__={hash:new Ft,map:new(Zt||Xt),string:new Ft}}var $t=Qt;function en(e){var t=typeof e;return t==`string`||t==`number`||t==`symbol`||t==`boolean`?e!==`__proto__`:e===null}var tn=en;function nn(e,t){var n=e.__data__;return tn(t)?n[typeof t==`string`?`string`:`hash`]:n.map}var rn=nn;function an(e){var t=rn(this,e).delete(e);return this.size-=t?1:0,t}var on=an;function sn(e){return rn(this,e).get(e)}var cn=sn;function ln(e){return rn(this,e).has(e)}var un=ln;function dn(e,t){var n=rn(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}var fn=dn;function pn(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}pn.prototype.clear=$t,pn.prototype.delete=on,pn.prototype.get=cn,pn.prototype.has=un,pn.prototype.set=fn;var mn=pn,hn=it(xe,`Set`),gn=`__lodash_hash_undefined__`;function _n(e){return this.__data__.set(e,gn),this}var vn=_n;function yn(e){return this.__data__.has(e)}var bn=yn;function xn(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new mn;++t<n;)this.add(e[t])}xn.prototype.add=xn.prototype.push=vn,xn.prototype.has=bn;var Sn=xn;function Cn(e,t){return e.has(t)}var wn=Cn;function Tn(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}var En=Tn;function Dn(e,t,n){for(var r=-1,i=e==null?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}var On=Dn,kn=hn&&1/En(new hn([,-0]))[1]==1/0?function(e){return new hn(e)}:ot,An=200;function jn(e,t,n){var r=-1,i=gt,a=e.length,o=!0,s=[],c=s;if(n)o=!1,i=On;else if(a>=An){var l=t?null:kn(e);if(l)return En(l);o=!1,i=wn,c=new Sn}else c=t?[]:s;outer:for(;++r<a;){var u=e[r],d=t?t(u):u;if(u=n||u!==0?u:0,o&&d===d){for(var f=c.length;f--;)if(c[f]===d)continue outer;t&&c.push(d),s.push(u)}else i(c,d,n)||(c!==s&&c.push(d),s.push(u))}return s}var Mn=jn;function Nn(e){return e&&e.length?Mn(e):[]}var Pn=Nn,Fn={class:`flex flex-col gap-2`},In={class:`flex flex-wrap items-center gap-2`},Ln={class:`tabs-box tabs gap-2 tabs-sm`},Rn=[`onClick`],zn={class:`badge badge-sm`},Bn={class:`flex items-center gap-2`},Vn={class:`hidden text-sm sm:inline-block`},Hn=[`checked`],Un=[`value`],Wn={value:``},Gn=[`value`],Kn={class:`flex flex-wrap items-center gap-2`},qn={class:`flex shrink-0 items-center gap-1`},Jn={class:`hidden text-sm whitespace-nowrap sm:inline-block`},Yn=[`value`],Xn=[`value`],Zn={class:`join flex min-w-0 flex-1 items-center`},Qn=[`placeholder`,`value`],$n=e({__name:`ConnectionsToolbar`,props:{tabs:{},activeTab:{},enableQuickFilter:{type:Boolean},sourceIPFilter:{},uniqueSourceIPs:{},sortColumn:{},sortDesc:{type:Boolean},sortableColumns:{},globalFilter:{},paused:{type:Boolean},isClosingConnections:{type:Boolean}},emits:[`update:activeTab`,`update:enableQuickFilter`,`update:sourceIPFilter`,`update:sortColumn`,`update:globalFilter`,`toggleSortOrder`,`togglePaused`,`closeConnections`,`openSettings`],setup(e,{emit:t}){let r=t,{t:l}=k();return(t,d)=>{let f=ke;return T(),s(`div`,Fn,[a(`div`,In,[a(`div`,Ln,[(T(!0),s(o,null,g(e.tabs,t=>(T(),s(`button`,{key:t.type,class:n([`tab gap-2 px-2`,{"bg-primary text-neutral!":e.activeTab===t.type}]),onClick:e=>r(`update:activeTab`,t.type)},[a(`span`,null,S(t.name),1),a(`div`,zn,S(t.count),1)],10,Rn))),128))]),a(`div`,Bn,[a(`span`,Vn,S(i(l)(`quickFilter`)),1),a(`input`,{type:`checkbox`,class:`toggle toggle-sm`,checked:e.enableQuickFilter,onChange:d[0]||=e=>r(`update:enableQuickFilter`,e.target.checked)},null,40,Hn)]),a(`select`,{class:`select max-w-40 flex-1 select-sm select-primary`,value:e.sourceIPFilter,onChange:d[1]||=e=>r(`update:sourceIPFilter`,e.target.value)},[a(`option`,Wn,S(i(l)(`all`)),1),(T(!0),s(o,null,g(e.uniqueSourceIPs,e=>(T(),s(`option`,{key:e,value:e},S(e),9,Gn))),128))],40,Un)]),a(`div`,Kn,[a(`div`,qn,[a(`span`,Jn,S(i(l)(`sortBy`)),1),a(`select`,{class:`select select-sm select-primary`,value:e.sortColumn,onChange:d[2]||=e=>r(`update:sortColumn`,e.target.value)},[(T(!0),s(o,null,g(e.sortableColumns,e=>(T(),s(`option`,{key:e.id,value:e.sortId},S(i(l)(e.key)),9,Xn))),128))],40,Yn),u(f,{class:`btn btn-sm btn-primary`,onClick:d[3]||=e=>r(`toggleSortOrder`)},{default:y(()=>[e.sortDesc?(T(),c(i(ce),{key:0})):(T(),c(i(pe),{key:1}))]),_:1})]),a(`div`,Zn,[a(`input`,{type:`search`,class:`input input-sm join-item min-w-0 flex-1 input-primary`,placeholder:i(l)(`search`),value:e.globalFilter,onInput:d[4]||=e=>r(`update:globalFilter`,e.target.value)},null,40,Qn),u(f,{class:`btn join-item btn-sm btn-primary`,onClick:d[5]||=e=>r(`togglePaused`)},{default:y(()=>[e.paused?(T(),c(i(ue),{key:0})):(T(),c(i(le),{key:1}))]),_:1}),u(f,{class:`btn join-item btn-sm btn-primary`,loading:e.isClosingConnections,onClick:d[6]||=e=>r(`closeConnections`)},{default:y(()=>[u(i(de))]),_:1},8,[`loading`]),u(f,{class:`btn join-item btn-sm btn-primary`,onClick:d[7]||=e=>r(`openSettings`)},{default:y(()=>[u(i(ge))]),_:1})])])])}}}),er=Object.assign($n,{__name:`ConnectionsToolbar`}),tr={class:`join shrink-0`},nr=[`disabled`],rr=[`disabled`],ir={key:0,class:`flex items-center px-1 text-xs text-base-content/40`},ar=[`onClick`],or=[`disabled`],sr=[`disabled`],cr=e({__name:`ConnectionsPagination`,props:{currentPage:{},totalPages:{},visiblePages:{}},emits:[`goToPage`,`previous`,`next`],setup(e,{emit:t}){let r=t;return(t,c)=>(T(),s(`div`,tr,[a(`button`,{class:`btn join-item btn-xs`,disabled:e.currentPage===0,onClick:c[0]||=e=>r(`goToPage`,0)},[u(i(ae),{size:14})],8,nr),a(`button`,{class:`btn join-item btn-xs`,disabled:e.currentPage===0,onClick:c[1]||=e=>r(`previous`)},[u(i(se),{size:14})],8,rr),(T(!0),s(o,null,g(e.visiblePages,(t,i)=>(T(),s(o,{key:t},[i>0&&e.visiblePages[i-1]!==t-1?(T(),s(`span`,ir,` ··· `)):C(``,!0),a(`button`,{class:n([`btn join-item min-w-8 btn-xs`,{"btn-active":e.currentPage===t}]),onClick:e=>r(`goToPage`,t)},S(t+1),11,ar)],64))),128)),a(`button`,{class:`btn join-item btn-xs`,disabled:e.currentPage>=e.totalPages-1,onClick:c[2]||=e=>r(`next`)},[u(i(oe),{size:14})],8,or),a(`button`,{class:`btn join-item btn-xs`,disabled:e.currentPage>=e.totalPages-1,onClick:c[3]||=t=>r(`goToPage`,e.totalPages-1)},[u(i(fe),{size:14})],8,sr)]))}}),lr=Object.assign(cr,{__name:`ConnectionsPagination`}),ur={class:`min-h-0 flex-1 overflow-auto rounded-md bg-base-300`},dr={class:`hidden md:table-header-group`},fr={class:`bg-base-200`},pr={class:`flex items-center gap-2`},mr=[`onClick`],hr=[`onClick`],gr=[`onClick`],_r=[`colspan`],vr={class:`flex items-center gap-2`},yr={class:`font-semibold text-primary`},br={class:`text-xs text-base-content/60`},xr=[`onClick`],Sr={class:`block text-xs text-base-content/60 md:hidden`},Cr={key:0,class:`py-8 text-center text-base-content/70`},wr=e({__name:`ConnectionsTable`,props:{columns:{},rowModel:{},sortColumn:{},sortDesc:{type:Boolean},groupingColumn:{},expandedGroups:{},tableSizeClass:{}},emits:[`headerClick`,`toggleGrouping`,`toggleGroupExpanded`,`rowClick`],setup(e,{emit:t}){let r=t,{t:l}=k();function u(e){return e.sortable&&!!e.sortId}function d(e,t){return e.sortId?t===e.sortId:!1}return(t,f)=>(T(),s(`div`,ur,[a(`table`,{class:n([`table-pin-rows table table-zebra`,e.tableSizeClass])},[a(`thead`,dr,[a(`tr`,fr,[(T(!0),s(o,null,g(e.columns,t=>(T(),s(`th`,{key:t.id,class:`text-base-content`},[a(`div`,pr,[a(`div`,{class:n([`flex-1`,{"cursor-pointer select-none":u(t)}]),onClick:e=>r(`headerClick`,t.id)},S(i(l)(t.key)),11,mr),d(t,e.sortColumn)&&!e.sortDesc?(T(),c(i(pe),{key:0,size:16})):d(t,e.sortColumn)&&e.sortDesc?(T(),c(i(ce),{key:1,size:16})):C(``,!0),t.groupable?(T(),s(`button`,{key:2,class:`cursor-pointer`,onClick:p(e=>r(`toggleGrouping`,t.id),[`stop`])},[e.groupingColumn===t.id?(T(),c(i(he),{key:0,size:18})):(T(),c(i(me),{key:1,size:18}))],8,hr)):C(``,!0)])]))),128))])]),a(`tbody`,null,[(T(!0),s(o,null,g(e.rowModel,t=>(T(),s(o,{key:t.type===`group`?`group-${t.key}`:t.original.id},[t.type===`group`?(T(),s(`tr`,{key:0,class:`cursor-pointer bg-base-200 hover:bg-base-300`,onClick:e=>r(`toggleGroupExpanded`,t.key)},[a(`td`,{colspan:e.columns.length,class:`py-2`},[a(`div`,vr,[e.expandedGroups[t.key]?(T(),c(i(he),{key:0,size:18})):(T(),c(i(me),{key:1,size:18})),a(`span`,yr,S(t.key),1),a(`span`,br,`(`+S(t.subRows.length)+`)`,1)])],8,_r)],8,gr)):(T(),s(`tr`,{key:1,class:`md:hover flex cursor-pointer flex-wrap rounded-xl border-4 border-base-300 px-2 odd:bg-base-100 even:bg-base-200 md:table-row md:rounded-none md:border-0 md:px-0`,onClick:e=>r(`rowClick`,t.original)},[(T(!0),s(o,null,g(e.columns,e=>(T(),s(`td`,{key:e.id,class:`nth-2n:text-right sm:nth-2n:text-left sm:nth-3n:text-right md:nth-2n:text-start md:nth-3n:text-start w-1/2 min-w-1/2 pb-1.5 text-justify align-top wrap-break-word nth-last-2:mb-3 sm:w-1/3 sm:min-w-1/3 md:w-auto md:min-w-0 md:text-start md:align-middle md:whitespace-nowrap md:nth-last-2:mb-0`},[a(`span`,Sr,S(i(l)(e.key)),1),(T(),c(E(()=>e.render(t.original))))]))),128))],8,xr))],64))),128))])],2),e.rowModel.length===0?(T(),s(`div`,Cr,S(i(l)(`noData`)),1)):C(``,!0)]))}}),Tr=Object.assign(wr,{__name:`ConnectionsTable`});function Er(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Dr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]==null?{}:arguments[t];t%2?Er(Object(n),!0).forEach(function(t){kr(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Er(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Or(e){"@babel/helpers - typeof";return Or=typeof Symbol==`function`&&typeof Symbol.iterator==`symbol`?function(e){return typeof e}:function(e){return e&&typeof Symbol==`function`&&e.constructor===Symbol&&e!==Symbol.prototype?`symbol`:typeof e},Or(e)}function kr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ar(){return Ar=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ar.apply(this,arguments)}function jr(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,a;for(a=0;a<r.length;a++)i=r[a],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function Mr(e,t){if(e==null)return{};var n=jr(e,t),r,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)r=a[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var Nr=`1.15.6`;function Pr(e){if(typeof window<`u`&&window.navigator)return!!navigator.userAgent.match(e)}var Fr=Pr(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Ir=Pr(/Edge/i),Lr=Pr(/firefox/i),Rr=Pr(/safari/i)&&!Pr(/chrome/i)&&!Pr(/android/i),zr=Pr(/iP(ad|od|hone)/i),Br=Pr(/chrome/i)&&Pr(/android/i),Vr={capture:!1,passive:!1};function N(e,t,n){e.addEventListener(t,n,!Fr&&Vr)}function P(e,t,n){e.removeEventListener(t,n,!Fr&&Vr)}function Hr(e,t){if(t){if(t[0]===`>`&&(t=t.substring(1)),e)try{if(e.matches)return e.matches(t);if(e.msMatchesSelector)return e.msMatchesSelector(t);if(e.webkitMatchesSelector)return e.webkitMatchesSelector(t)}catch{return!1}return!1}}function Ur(e){return e.host&&e!==document&&e.host.nodeType?e.host:e.parentNode}function F(e,t,n,r){if(e){n||=document;do{if(t!=null&&(t[0]===`>`?e.parentNode===n&&Hr(e,t):Hr(e,t))||r&&e===n)return e;if(e===n)break}while(e=Ur(e))}return null}var Wr=/\s+/g;function I(e,t,n){e&&t&&(e.classList?e.classList[n?`add`:`remove`](t):e.className=((` `+e.className+` `).replace(Wr,` `).replace(` `+t+` `,` `)+(n?` `+t:``)).replace(Wr,` `))}function L(e,t,n){var r=e&&e.style;if(r){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(e,``):e.currentStyle&&(n=e.currentStyle),t===void 0?n:n[t];!(t in r)&&t.indexOf(`webkit`)===-1&&(t=`-webkit-`+t),r[t]=n+(typeof n==`string`?``:`px`)}}function Gr(e,t){var n=``;if(typeof e==`string`)n=e;else do{var r=L(e,`transform`);r&&r!==`none`&&(n=r+` `+n)}while(!t&&(e=e.parentNode));var i=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return i&&new i(n)}function Kr(e,t,n){if(e){var r=e.getElementsByTagName(t),i=0,a=r.length;if(n)for(;i<a;i++)n(r[i],i);return r}return[]}function qr(){return document.scrollingElement||document.documentElement}function R(e,t,n,r,i){if(!(!e.getBoundingClientRect&&e!==window)){var a,o,s,c,l,u,d;if(e!==window&&e.parentNode&&e!==qr()?(a=e.getBoundingClientRect(),o=a.top,s=a.left,c=a.bottom,l=a.right,u=a.height,d=a.width):(o=0,s=0,c=window.innerHeight,l=window.innerWidth,u=window.innerHeight,d=window.innerWidth),(t||n)&&e!==window&&(i||=e.parentNode,!Fr))do if(i&&i.getBoundingClientRect&&(L(i,`transform`)!==`none`||n&&L(i,`position`)!==`static`)){var f=i.getBoundingClientRect();o-=f.top+parseInt(L(i,`border-top-width`)),s-=f.left+parseInt(L(i,`border-left-width`)),c=o+a.height,l=s+a.width;break}while(i=i.parentNode);if(r&&e!==window){var p=Gr(i||e),m=p&&p.a,h=p&&p.d;p&&(o/=h,s/=m,d/=m,u/=h,c=o+u,l=s+d)}return{top:o,left:s,bottom:c,right:l,width:d,height:u}}}function Jr(e,t,n){for(var r=$r(e,!0),i=R(e)[t];r;){var a=R(r)[n],o=void 0;if(o=n===`top`||n===`left`?i>=a:i<=a,!o)return r;if(r===qr())break;r=$r(r,!1)}return!1}function Yr(e,t,n,r){for(var i=0,a=0,o=e.children;a<o.length;){if(o[a].style.display!==`none`&&o[a]!==Q.ghost&&(r||o[a]!==Q.dragged)&&F(o[a],n.draggable,e,!1)){if(i===t)return o[a];i++}a++}return null}function Xr(e,t){for(var n=e.lastElementChild;n&&(n===Q.ghost||L(n,`display`)===`none`||t&&!Hr(n,t));)n=n.previousElementSibling;return n||null}function z(e,t){var n=0;if(!e||!e.parentNode)return-1;for(;e=e.previousElementSibling;)e.nodeName.toUpperCase()!==`TEMPLATE`&&e!==Q.clone&&(!t||Hr(e,t))&&n++;return n}function Zr(e){var t=0,n=0,r=qr();if(e)do{var i=Gr(e),a=i.a,o=i.d;t+=e.scrollLeft*a,n+=e.scrollTop*o}while(e!==r&&(e=e.parentNode));return[t,n]}function Qr(e,t){for(var n in e)if(e.hasOwnProperty(n)){for(var r in t)if(t.hasOwnProperty(r)&&t[r]===e[n][r])return Number(n)}return-1}function $r(e,t){if(!e||!e.getBoundingClientRect)return qr();var n=e,r=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var i=L(n);if(n.clientWidth<n.scrollWidth&&(i.overflowX==`auto`||i.overflowX==`scroll`)||n.clientHeight<n.scrollHeight&&(i.overflowY==`auto`||i.overflowY==`scroll`)){if(!n.getBoundingClientRect||n===document.body)return qr();if(r||t)return n;r=!0}}while(n=n.parentNode);return qr()}function ei(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function ti(e,t){return Math.round(e.top)===Math.round(t.top)&&Math.round(e.left)===Math.round(t.left)&&Math.round(e.height)===Math.round(t.height)&&Math.round(e.width)===Math.round(t.width)}var ni;function ri(e,t){return function(){if(!ni){var n=arguments,r=this;n.length===1?e.call(r,n[0]):e.apply(r,n),ni=setTimeout(function(){ni=void 0},t)}}}function ii(){clearTimeout(ni),ni=void 0}function ai(e,t,n){e.scrollLeft+=t,e.scrollTop+=n}function oi(e){var t=window.Polymer,n=window.jQuery||window.Zepto;return t&&t.dom?t.dom(e).cloneNode(!0):n?n(e).clone(!0)[0]:e.cloneNode(!0)}function si(e,t,n){var r={};return Array.from(e.children).forEach(function(i){if(!(!F(i,t.draggable,e,!1)||i.animated||i===n)){var a=R(i);r.left=Math.min(r.left??1/0,a.left),r.top=Math.min(r.top??1/0,a.top),r.right=Math.max(r.right??-1/0,a.right),r.bottom=Math.max(r.bottom??-1/0,a.bottom)}}),r.width=r.right-r.left,r.height=r.bottom-r.top,r.x=r.left,r.y=r.top,r}var B=`Sortable`+new Date().getTime();function ci(){var e=[],t;return{captureAnimationState:function(){e=[],this.options.animation&&[].slice.call(this.el.children).forEach(function(t){if(!(L(t,`display`)===`none`||t===Q.ghost)){e.push({target:t,rect:R(t)});var n=Dr({},e[e.length-1].rect);if(t.thisAnimationDuration){var r=Gr(t,!0);r&&(n.top-=r.f,n.left-=r.e)}t.fromRect=n}})},addAnimationState:function(t){e.push(t)},removeAnimationState:function(t){e.splice(Qr(e,{target:t}),1)},animateAll:function(n){var r=this;if(!this.options.animation){clearTimeout(t),typeof n==`function`&&n();return}var i=!1,a=0;e.forEach(function(e){var t=0,n=e.target,o=n.fromRect,s=R(n),c=n.prevFromRect,l=n.prevToRect,u=e.rect,d=Gr(n,!0);d&&(s.top-=d.f,s.left-=d.e),n.toRect=s,n.thisAnimationDuration&&ti(c,s)&&!ti(o,s)&&(u.top-s.top)/(u.left-s.left)===(o.top-s.top)/(o.left-s.left)&&(t=ui(u,c,l,r.options)),ti(s,o)||(n.prevFromRect=o,n.prevToRect=s,t||=r.options.animation,r.animate(n,u,s,t)),t&&(i=!0,a=Math.max(a,t),clearTimeout(n.animationResetTimer),n.animationResetTimer=setTimeout(function(){n.animationTime=0,n.prevFromRect=null,n.fromRect=null,n.prevToRect=null,n.thisAnimationDuration=null},t),n.thisAnimationDuration=t)}),clearTimeout(t),i?t=setTimeout(function(){typeof n==`function`&&n()},a):typeof n==`function`&&n(),e=[]},animate:function(e,t,n,r){if(r){L(e,`transition`,``),L(e,`transform`,``);var i=Gr(this.el),a=i&&i.a,o=i&&i.d,s=(t.left-n.left)/(a||1),c=(t.top-n.top)/(o||1);e.animatingX=!!s,e.animatingY=!!c,L(e,`transform`,`translate3d(`+s+`px,`+c+`px,0)`),this.forRepaintDummy=li(e),L(e,`transition`,`transform `+r+`ms`+(this.options.easing?` `+this.options.easing:``)),L(e,`transform`,`translate3d(0,0,0)`),typeof e.animated==`number`&&clearTimeout(e.animated),e.animated=setTimeout(function(){L(e,`transition`,``),L(e,`transform`,``),e.animated=!1,e.animatingX=!1,e.animatingY=!1},r)}}}}function li(e){return e.offsetWidth}function ui(e,t,n,r){return Math.sqrt((t.top-e.top)**2+(t.left-e.left)**2)/Math.sqrt((t.top-n.top)**2+(t.left-n.left)**2)*r.animation}var di=[],fi={initializeByDefault:!0},pi={mount:function(e){for(var t in fi)fi.hasOwnProperty(t)&&!(t in e)&&(e[t]=fi[t]);di.forEach(function(t){if(t.pluginName===e.pluginName)throw`Sortable: Cannot mount plugin ${e.pluginName} more than once`}),di.push(e)},pluginEvent:function(e,t,n){var r=this;this.eventCanceled=!1,n.cancel=function(){r.eventCanceled=!0};var i=e+`Global`;di.forEach(function(r){t[r.pluginName]&&(t[r.pluginName][i]&&t[r.pluginName][i](Dr({sortable:t},n)),t.options[r.pluginName]&&t[r.pluginName][e]&&t[r.pluginName][e](Dr({sortable:t},n)))})},initializePlugins:function(e,t,n,r){for(var i in di.forEach(function(r){var i=r.pluginName;if(!(!e.options[i]&&!r.initializeByDefault)){var a=new r(e,t,e.options);a.sortable=e,a.options=e.options,e[i]=a,Ar(n,a.defaults)}}),e.options)if(e.options.hasOwnProperty(i)){var a=this.modifyOption(e,i,e.options[i]);a!==void 0&&(e.options[i]=a)}},getEventProperties:function(e,t){var n={};return di.forEach(function(r){typeof r.eventProperties==`function`&&Ar(n,r.eventProperties.call(t[r.pluginName],e))}),n},modifyOption:function(e,t,n){var r;return di.forEach(function(i){e[i.pluginName]&&i.optionListeners&&typeof i.optionListeners[t]==`function`&&(r=i.optionListeners[t].call(e[i.pluginName],n))}),r}};function mi(e){var t=e.sortable,n=e.rootEl,r=e.name,i=e.targetEl,a=e.cloneEl,o=e.toEl,s=e.fromEl,c=e.oldIndex,l=e.newIndex,u=e.oldDraggableIndex,d=e.newDraggableIndex,f=e.originalEvent,p=e.putSortable,m=e.extraEventProperties;if(t||=n&&n[B],t){var h,g=t.options,_=`on`+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!Fr&&!Ir?h=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(h=document.createEvent(`Event`),h.initEvent(r,!0,!0)),h.to=o||n,h.from=s||n,h.item=i||n,h.clone=a,h.oldIndex=c,h.newIndex=l,h.oldDraggableIndex=u,h.newDraggableIndex=d,h.originalEvent=f,h.pullMode=p?p.lastPutMode:void 0;var v=Dr(Dr({},m),pi.getEventProperties(r,t));for(var y in v)h[y]=v[y];n&&n.dispatchEvent(h),g[_]&&g[_].call(t,h)}}var hi=[`evt`],V=function(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.evt,i=Mr(n,hi);pi.pluginEvent.bind(Q)(e,t,Dr({dragEl:U,parentEl:W,ghostEl:G,rootEl:K,nextEl:gi,lastDownEl:_i,cloneEl:q,cloneHidden:vi,dragStarted:ji,putSortable:Y,activeSortable:Q.active,originalEvent:r,oldIndex:yi,oldDraggableIndex:bi,newIndex:J,newDraggableIndex:xi,hideGhostForTarget:Yi,unhideGhostForTarget:Xi,cloneNowHidden:function(){vi=!0},cloneNowShown:function(){vi=!1},dispatchSortableEvent:function(e){H({sortable:t,name:e,originalEvent:r})}},i))};function H(e){mi(Dr({putSortable:Y,cloneEl:q,targetEl:U,rootEl:K,oldIndex:yi,oldDraggableIndex:bi,newIndex:J,newDraggableIndex:xi},e))}var U,W,G,K,gi,_i,q,vi,yi,J,bi,xi,Si,Y,Ci=!1,wi=!1,Ti=[],Ei,X,Di,Oi,ki,Ai,ji,Mi,Ni,Pi=!1,Fi=!1,Ii,Z,Li=[],Ri=!1,zi=[],Bi=typeof document<`u`,Vi=zr,Hi=Ir||Fr?`cssFloat`:`float`,Ui=Bi&&!Br&&!zr&&`draggable`in document.createElement(`div`),Wi=function(){if(Bi){if(Fr)return!1;var e=document.createElement(`x`);return e.style.cssText=`pointer-events:auto`,e.style.pointerEvents===`auto`}}(),Gi=function(e,t){var n=L(e),r=parseInt(n.width)-parseInt(n.paddingLeft)-parseInt(n.paddingRight)-parseInt(n.borderLeftWidth)-parseInt(n.borderRightWidth),i=Yr(e,0,t),a=Yr(e,1,t),o=i&&L(i),s=a&&L(a),c=o&&parseInt(o.marginLeft)+parseInt(o.marginRight)+R(i).width,l=s&&parseInt(s.marginLeft)+parseInt(s.marginRight)+R(a).width;if(n.display===`flex`)return n.flexDirection===`column`||n.flexDirection===`column-reverse`?`vertical`:`horizontal`;if(n.display===`grid`)return n.gridTemplateColumns.split(` `).length<=1?`vertical`:`horizontal`;if(i&&o.float&&o.float!==`none`){var u=o.float===`left`?`left`:`right`;return a&&(s.clear===`both`||s.clear===u)?`vertical`:`horizontal`}return i&&(o.display===`block`||o.display===`flex`||o.display===`table`||o.display===`grid`||c>=r&&n[Hi]===`none`||a&&n[Hi]===`none`&&c+l>r)?`vertical`:`horizontal`},Ki=function(e,t,n){var r=n?e.left:e.top,i=n?e.right:e.bottom,a=n?e.width:e.height,o=n?t.left:t.top,s=n?t.right:t.bottom,c=n?t.width:t.height;return r===o||i===s||r+a/2===o+c/2},qi=function(e,t){var n;return Ti.some(function(r){var i=r[B].options.emptyInsertThreshold;if(!(!i||Xr(r))){var a=R(r),o=e>=a.left-i&&e<=a.right+i,s=t>=a.top-i&&t<=a.bottom+i;if(o&&s)return n=r}}),n},Ji=function(e){function t(e,n){return function(r,i,a,o){var s=r.options.group.name&&i.options.group.name&&r.options.group.name===i.options.group.name;if(e==null&&(n||s))return!0;if(e==null||e===!1)return!1;if(n&&e===`clone`)return e;if(typeof e==`function`)return t(e(r,i,a,o),n)(r,i,a,o);var c=(n?r:i).options.group.name;return e===!0||typeof e==`string`&&e===c||e.join&&e.indexOf(c)>-1}}var n={},r=e.group;(!r||Or(r)!=`object`)&&(r={name:r}),n.name=r.name,n.checkPull=t(r.pull,!0),n.checkPut=t(r.put),n.revertClone=r.revertClone,e.group=n},Yi=function(){!Wi&&G&&L(G,`display`,`none`)},Xi=function(){!Wi&&G&&L(G,`display`,``)};Bi&&!Br&&document.addEventListener(`click`,function(e){if(wi)return e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),wi=!1,!1},!0);var Zi=function(e){if(U){e=e.touches?e.touches[0]:e;var t=qi(e.clientX,e.clientY);if(t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);n.target=n.rootEl=t,n.preventDefault=void 0,n.stopPropagation=void 0,t[B]._onDragOver(n)}}},Qi=function(e){U&&U.parentNode[B]._isOutsideThisEl(e.target)};function Q(e,t){if(!(e&&e.nodeType&&e.nodeType===1))throw`Sortable: \`el\` must be an HTMLElement, not ${{}.toString.call(e)}`;this.el=e,this.options=t=Ar({},t),e[B]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(e.nodeName)?`>li`:`>*`,swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return Gi(e,this.options)},ghostClass:`sortable-ghost`,chosenClass:`sortable-chosen`,dragClass:`sortable-drag`,ignore:`a, img`,filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(e,t){e.setData(`Text`,t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:`data-id`,delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:`sortable-fallback`,fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Q.supportPointer!==!1&&`PointerEvent`in window&&(!Rr||zr),emptyInsertThreshold:5};for(var r in pi.initializePlugins(this,e,n),n)!(r in t)&&(t[r]=n[r]);for(var i in Ji(t),this)i.charAt(0)===`_`&&typeof this[i]==`function`&&(this[i]=this[i].bind(this));this.nativeDraggable=t.forceFallback?!1:Ui,this.nativeDraggable&&(this.options.touchStartThreshold=1),t.supportPointer?N(e,`pointerdown`,this._onTapStart):(N(e,`mousedown`,this._onTapStart),N(e,`touchstart`,this._onTapStart)),this.nativeDraggable&&(N(e,`dragover`,this),N(e,`dragenter`,this)),Ti.push(this.el),t.store&&t.store.get&&this.sort(t.store.get(this)||[]),Ar(this,ci())}Q.prototype={constructor:Q,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Mi=null)},_getDirection:function(e,t){return typeof this.options.direction==`function`?this.options.direction.call(this,e,t,U):this.options.direction},_onTapStart:function(e){if(e.cancelable){var t=this,n=this.el,r=this.options,i=r.preventOnFilter,a=e.type,o=e.touches&&e.touches[0]||e.pointerType&&e.pointerType===`touch`&&e,s=(o||e).target,c=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||s,l=r.filter;if(ca(n),!U&&!(/mousedown|pointerdown/.test(a)&&e.button!==0||r.disabled)&&!c.isContentEditable&&!(!this.nativeDraggable&&Rr&&s&&s.tagName.toUpperCase()===`SELECT`)&&(s=F(s,r.draggable,n,!1),!(s&&s.animated)&&_i!==s)){if(yi=z(s),bi=z(s,r.draggable),typeof l==`function`){if(l.call(this,e,s,this)){H({sortable:t,rootEl:c,name:`filter`,targetEl:s,toEl:n,fromEl:n}),V(`filter`,t,{evt:e}),i&&e.preventDefault();return}}else if(l&&(l=l.split(`,`).some(function(r){if(r=F(c,r.trim(),n,!1),r)return H({sortable:t,rootEl:r,name:`filter`,targetEl:s,fromEl:n,toEl:n}),V(`filter`,t,{evt:e}),!0}),l)){i&&e.preventDefault();return}r.handle&&!F(c,r.handle,n,!1)||this._prepareDragStart(e,o,s)}}},_prepareDragStart:function(e,t,n){var r=this,i=r.el,a=r.options,o=i.ownerDocument,s;if(n&&!U&&n.parentNode===i){var c=R(n);if(K=i,U=n,W=U.parentNode,gi=U.nextSibling,_i=n,Si=a.group,Q.dragged=U,Ei={target:U,clientX:(t||e).clientX,clientY:(t||e).clientY},ki=Ei.clientX-c.left,Ai=Ei.clientY-c.top,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,U.style[`will-change`]=`all`,s=function(){if(V(`delayEnded`,r,{evt:e}),Q.eventCanceled){r._onDrop();return}r._disableDelayedDragEvents(),!Lr&&r.nativeDraggable&&(U.draggable=!0),r._triggerDragStart(e,t),H({sortable:r,name:`choose`,originalEvent:e}),I(U,a.chosenClass,!0)},a.ignore.split(`,`).forEach(function(e){Kr(U,e.trim(),ta)}),N(o,`dragover`,Zi),N(o,`mousemove`,Zi),N(o,`touchmove`,Zi),a.supportPointer?(N(o,`pointerup`,r._onDrop),!this.nativeDraggable&&N(o,`pointercancel`,r._onDrop)):(N(o,`mouseup`,r._onDrop),N(o,`touchend`,r._onDrop),N(o,`touchcancel`,r._onDrop)),Lr&&this.nativeDraggable&&(this.options.touchStartThreshold=4,U.draggable=!0),V(`delayStart`,this,{evt:e}),a.delay&&(!a.delayOnTouchOnly||t)&&(!this.nativeDraggable||!(Ir||Fr))){if(Q.eventCanceled){this._onDrop();return}a.supportPointer?(N(o,`pointerup`,r._disableDelayedDrag),N(o,`pointercancel`,r._disableDelayedDrag)):(N(o,`mouseup`,r._disableDelayedDrag),N(o,`touchend`,r._disableDelayedDrag),N(o,`touchcancel`,r._disableDelayedDrag)),N(o,`mousemove`,r._delayedDragTouchMoveHandler),N(o,`touchmove`,r._delayedDragTouchMoveHandler),a.supportPointer&&N(o,`pointermove`,r._delayedDragTouchMoveHandler),r._dragStartTimer=setTimeout(s,a.delay)}else s()}},_delayedDragTouchMoveHandler:function(e){var t=e.touches?e.touches[0]:e;Math.max(Math.abs(t.clientX-this._lastX),Math.abs(t.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){U&&ta(U),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;P(e,`mouseup`,this._disableDelayedDrag),P(e,`touchend`,this._disableDelayedDrag),P(e,`touchcancel`,this._disableDelayedDrag),P(e,`pointerup`,this._disableDelayedDrag),P(e,`pointercancel`,this._disableDelayedDrag),P(e,`mousemove`,this._delayedDragTouchMoveHandler),P(e,`touchmove`,this._delayedDragTouchMoveHandler),P(e,`pointermove`,this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,t){t||=e.pointerType==`touch`&&e,!this.nativeDraggable||t?this.options.supportPointer?N(document,`pointermove`,this._onTouchMove):t?N(document,`touchmove`,this._onTouchMove):N(document,`mousemove`,this._onTouchMove):(N(U,`dragend`,this),N(K,`dragstart`,this._onDragStart));try{document.selection?la(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,t){if(Ci=!1,K&&U){V(`dragStarted`,this,{evt:t}),this.nativeDraggable&&N(document,`dragover`,Qi);var n=this.options;!e&&I(U,n.dragClass,!1),I(U,n.ghostClass,!0),Q.active=this,e&&this._appendGhost(),H({sortable:this,name:`start`,originalEvent:t})}else this._nulling()},_emulateDragOver:function(){if(X){this._lastX=X.clientX,this._lastY=X.clientY,Yi();for(var e=document.elementFromPoint(X.clientX,X.clientY),t=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(X.clientX,X.clientY),e!==t);)t=e;if(U.parentNode[B]._isOutsideThisEl(e),t)do{if(t[B]){var n=void 0;if(n=t[B]._onDragOver({clientX:X.clientX,clientY:X.clientY,target:e,rootEl:t}),n&&!this.options.dragoverBubble)break}e=t}while(t=Ur(t));Xi()}},_onTouchMove:function(e){if(Ei){var t=this.options,n=t.fallbackTolerance,r=t.fallbackOffset,i=e.touches?e.touches[0]:e,a=G&&Gr(G,!0),o=G&&a&&a.a,s=G&&a&&a.d,c=Vi&&Z&&Zr(Z),l=(i.clientX-Ei.clientX+r.x)/(o||1)+(c?c[0]-Li[0]:0)/(o||1),u=(i.clientY-Ei.clientY+r.y)/(s||1)+(c?c[1]-Li[1]:0)/(s||1);if(!Q.active&&!Ci){if(n&&Math.max(Math.abs(i.clientX-this._lastX),Math.abs(i.clientY-this._lastY))<n)return;this._onDragStart(e,!0)}if(G){a?(a.e+=l-(Di||0),a.f+=u-(Oi||0)):a={a:1,b:0,c:0,d:1,e:l,f:u};var d=`matrix(${a.a},${a.b},${a.c},${a.d},${a.e},${a.f})`;L(G,`webkitTransform`,d),L(G,`mozTransform`,d),L(G,`msTransform`,d),L(G,`transform`,d),Di=l,Oi=u,X=i}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!G){var e=this.options.fallbackOnBody?document.body:K,t=R(U,!0,Vi,!0,e),n=this.options;if(Vi){for(Z=e;L(Z,`position`)===`static`&&L(Z,`transform`)===`none`&&Z!==document;)Z=Z.parentNode;Z!==document.body&&Z!==document.documentElement?(Z===document&&(Z=qr()),t.top+=Z.scrollTop,t.left+=Z.scrollLeft):Z=qr(),Li=Zr(Z)}G=U.cloneNode(!0),I(G,n.ghostClass,!1),I(G,n.fallbackClass,!0),I(G,n.dragClass,!0),L(G,`transition`,``),L(G,`transform`,``),L(G,`box-sizing`,`border-box`),L(G,`margin`,0),L(G,`top`,t.top),L(G,`left`,t.left),L(G,`width`,t.width),L(G,`height`,t.height),L(G,`opacity`,`0.8`),L(G,`position`,Vi?`absolute`:`fixed`),L(G,`zIndex`,`100000`),L(G,`pointerEvents`,`none`),Q.ghost=G,e.appendChild(G),L(G,`transform-origin`,ki/parseInt(G.style.width)*100+`% `+Ai/parseInt(G.style.height)*100+`%`)}},_onDragStart:function(e,t){var n=this,r=e.dataTransfer,i=n.options;if(V(`dragStart`,this,{evt:e}),Q.eventCanceled){this._onDrop();return}V(`setupClone`,this),Q.eventCanceled||(q=oi(U),q.removeAttribute(`id`),q.draggable=!1,q.style[`will-change`]=``,this._hideClone(),I(q,this.options.chosenClass,!1),Q.clone=q),n.cloneId=la(function(){V(`clone`,n),!Q.eventCanceled&&(n.options.removeCloneOnHide||K.insertBefore(q,U),n._hideClone(),H({sortable:n,name:`clone`}))}),!t&&I(U,i.dragClass,!0),t?(wi=!0,n._loopId=setInterval(n._emulateDragOver,50)):(P(document,`mouseup`,n._onDrop),P(document,`touchend`,n._onDrop),P(document,`touchcancel`,n._onDrop),r&&(r.effectAllowed=`move`,i.setData&&i.setData.call(n,r,U)),N(document,`drop`,n),L(U,`transform`,`translateZ(0)`)),Ci=!0,n._dragStartId=la(n._dragStarted.bind(n,t,e)),N(document,`selectstart`,n),ji=!0,window.getSelection().removeAllRanges(),Rr&&L(document.body,`user-select`,`none`)},_onDragOver:function(e){var t=this.el,n=e.target,r,i,a,o=this.options,s=o.group,c=Q.active,l=Si===s,u=o.sort,d=Y||c,f,p=this,m=!1;if(Ri)return;function h(o,s){V(o,p,Dr({evt:e,isOwner:l,axis:f?`vertical`:`horizontal`,revert:a,dragRect:r,targetRect:i,canSort:u,fromSortable:d,target:n,completed:_,onMove:function(n,i){return ea(K,t,U,r,n,R(n),e,i)},changed:v},s))}function g(){h(`dragOverAnimationCapture`),p.captureAnimationState(),p!==d&&d.captureAnimationState()}function _(r){return h(`dragOverCompleted`,{insertion:r}),r&&(l?c._hideClone():c._showClone(p),p!==d&&(I(U,Y?Y.options.ghostClass:c.options.ghostClass,!1),I(U,o.ghostClass,!0)),Y!==p&&p!==Q.active?Y=p:p===Q.active&&Y&&(Y=null),d===p&&(p._ignoreWhileAnimating=n),p.animateAll(function(){h(`dragOverAnimationComplete`),p._ignoreWhileAnimating=null}),p!==d&&(d.animateAll(),d._ignoreWhileAnimating=null)),(n===U&&!U.animated||n===t&&!n.animated)&&(Mi=null),!o.dragoverBubble&&!e.rootEl&&n!==document&&(U.parentNode[B]._isOutsideThisEl(e.target),!r&&Zi(e)),!o.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),m=!0}function v(){J=z(U),xi=z(U,o.draggable),H({sortable:p,name:`change`,toEl:t,newIndex:J,newDraggableIndex:xi,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),n=F(n,o.draggable,t,!0),h(`dragOver`),Q.eventCanceled)return m;if(U.contains(e.target)||n.animated&&n.animatingX&&n.animatingY||p._ignoreWhileAnimating===n)return _(!1);if(wi=!1,c&&!o.disabled&&(l?u||(a=W!==K):Y===this||(this.lastPutMode=Si.checkPull(this,c,U,e))&&s.checkPut(this,c,U,e))){if(f=this._getDirection(e,n)===`vertical`,r=R(U),h(`dragOverValid`),Q.eventCanceled)return m;if(a)return W=K,g(),this._hideClone(),h(`revert`),Q.eventCanceled||(gi?K.insertBefore(U,gi):K.appendChild(U)),_(!0);var y=Xr(t,o.draggable);if(!y||ia(e,f,this)&&!y.animated){if(y===U)return _(!1);if(y&&t===e.target&&(n=y),n&&(i=R(n)),ea(K,t,U,r,n,i,e,!!n)!==!1)return g(),y&&y.nextSibling?t.insertBefore(U,y.nextSibling):t.appendChild(U),W=t,v(),_(!0)}else if(y&&ra(e,f,this)){var ee=Yr(t,0,o,!0);if(ee===U)return _(!1);if(n=ee,i=R(n),ea(K,t,U,r,n,i,e,!1)!==!1)return g(),t.insertBefore(U,ee),W=t,v(),_(!0)}else if(n.parentNode===t){i=R(n);var b=0,x,S=U.parentNode!==t,te=!Ki(U.animated&&U.toRect||r,n.animated&&n.toRect||i,f),C=f?`top`:`left`,w=Jr(n,`top`,`top`)||Jr(U,`top`,`top`),T=w?w.scrollTop:void 0;Mi!==n&&(x=i[C],Pi=!1,Fi=!te&&o.invertSwap||S),b=aa(e,n,i,f,te?1:o.swapThreshold,o.invertedSwapThreshold==null?o.swapThreshold:o.invertedSwapThreshold,Fi,Mi===n);var E;if(b!==0){var D=z(U);do D-=b,E=W.children[D];while(E&&(L(E,`display`)===`none`||E===G))}if(b===0||E===n)return _(!1);Mi=n,Ni=b;var O=n.nextElementSibling,k=!1;k=b===1;var A=ea(K,t,U,r,n,i,e,k);if(A!==!1)return(A===1||A===-1)&&(k=A===1),Ri=!0,setTimeout(na,30),g(),k&&!O?t.appendChild(U):n.parentNode.insertBefore(U,k?O:n),w&&ai(w,0,T-w.scrollTop),W=U.parentNode,x!==void 0&&!Fi&&(Ii=Math.abs(x-R(n)[C])),v(),_(!0)}if(t.contains(U))return _(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){P(document,`mousemove`,this._onTouchMove),P(document,`touchmove`,this._onTouchMove),P(document,`pointermove`,this._onTouchMove),P(document,`dragover`,Zi),P(document,`mousemove`,Zi),P(document,`touchmove`,Zi)},_offUpEvents:function(){var e=this.el.ownerDocument;P(e,`mouseup`,this._onDrop),P(e,`touchend`,this._onDrop),P(e,`pointerup`,this._onDrop),P(e,`pointercancel`,this._onDrop),P(e,`touchcancel`,this._onDrop),P(document,`selectstart`,this)},_onDrop:function(e){var t=this.el,n=this.options;if(J=z(U),xi=z(U,n.draggable),V(`drop`,this,{evt:e}),W=U&&U.parentNode,J=z(U),xi=z(U,n.draggable),Q.eventCanceled){this._nulling();return}Ci=!1,Fi=!1,Pi=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),ua(this.cloneId),ua(this._dragStartId),this.nativeDraggable&&(P(document,`drop`,this),P(t,`dragstart`,this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Rr&&L(document.body,`user-select`,``),L(U,`transform`,``),e&&(ji&&(e.cancelable&&e.preventDefault(),!n.dropBubble&&e.stopPropagation()),G&&G.parentNode&&G.parentNode.removeChild(G),(K===W||Y&&Y.lastPutMode!==`clone`)&&q&&q.parentNode&&q.parentNode.removeChild(q),U&&(this.nativeDraggable&&P(U,`dragend`,this),ta(U),U.style[`will-change`]=``,ji&&!Ci&&I(U,Y?Y.options.ghostClass:this.options.ghostClass,!1),I(U,this.options.chosenClass,!1),H({sortable:this,name:`unchoose`,toEl:W,newIndex:null,newDraggableIndex:null,originalEvent:e}),K===W?J!==yi&&J>=0&&(H({sortable:this,name:`update`,toEl:W,originalEvent:e}),H({sortable:this,name:`sort`,toEl:W,originalEvent:e})):(J>=0&&(H({rootEl:W,name:`add`,toEl:W,fromEl:K,originalEvent:e}),H({sortable:this,name:`remove`,toEl:W,originalEvent:e}),H({rootEl:W,name:`sort`,toEl:W,fromEl:K,originalEvent:e}),H({sortable:this,name:`sort`,toEl:W,originalEvent:e})),Y&&Y.save()),Q.active&&((J==null||J===-1)&&(J=yi,xi=bi),H({sortable:this,name:`end`,toEl:W,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){V(`nulling`,this),K=U=W=G=gi=q=_i=vi=Ei=X=ji=J=xi=yi=bi=Mi=Ni=Y=Si=Q.dragged=Q.ghost=Q.clone=Q.active=null,zi.forEach(function(e){e.checked=!0}),zi.length=Di=Oi=0},handleEvent:function(e){switch(e.type){case`drop`:case`dragend`:this._onDrop(e);break;case`dragenter`:case`dragover`:U&&(this._onDragOver(e),$i(e));break;case`selectstart`:e.preventDefault();break}},toArray:function(){for(var e=[],t,n=this.el.children,r=0,i=n.length,a=this.options;r<i;r++)t=n[r],F(t,a.draggable,this.el,!1)&&e.push(t.getAttribute(a.dataIdAttr)||sa(t));return e},sort:function(e,t){var n={},r=this.el;this.toArray().forEach(function(e,t){var i=r.children[t];F(i,this.options.draggable,r,!1)&&(n[e]=i)},this),t&&this.captureAnimationState(),e.forEach(function(e){n[e]&&(r.removeChild(n[e]),r.appendChild(n[e]))}),t&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,t){return F(e,t||this.options.draggable,this.el,!1)},option:function(e,t){var n=this.options;if(t===void 0)return n[e];var r=pi.modifyOption(this,e,t);r===void 0?n[e]=t:n[e]=r,e===`group`&&Ji(n)},destroy:function(){V(`destroy`,this);var e=this.el;e[B]=null,P(e,`mousedown`,this._onTapStart),P(e,`touchstart`,this._onTapStart),P(e,`pointerdown`,this._onTapStart),this.nativeDraggable&&(P(e,`dragover`,this),P(e,`dragenter`,this)),Array.prototype.forEach.call(e.querySelectorAll(`[draggable]`),function(e){e.removeAttribute(`draggable`)}),this._onDrop(),this._disableDelayedDragEvents(),Ti.splice(Ti.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!vi){if(V(`hideClone`,this),Q.eventCanceled)return;L(q,`display`,`none`),this.options.removeCloneOnHide&&q.parentNode&&q.parentNode.removeChild(q),vi=!0}},_showClone:function(e){if(e.lastPutMode!==`clone`){this._hideClone();return}if(vi){if(V(`showClone`,this),Q.eventCanceled)return;U.parentNode==K&&!this.options.group.revertClone?K.insertBefore(q,U):gi?K.insertBefore(q,gi):K.appendChild(q),this.options.group.revertClone&&this.animate(U,q),L(q,`display`,``),vi=!1}}};function $i(e){e.dataTransfer&&(e.dataTransfer.dropEffect=`move`),e.cancelable&&e.preventDefault()}function ea(e,t,n,r,i,a,o,s){var c,l=e[B],u=l.options.onMove,d;return window.CustomEvent&&!Fr&&!Ir?c=new CustomEvent(`move`,{bubbles:!0,cancelable:!0}):(c=document.createEvent(`Event`),c.initEvent(`move`,!0,!0)),c.to=t,c.from=e,c.dragged=n,c.draggedRect=r,c.related=i||t,c.relatedRect=a||R(t),c.willInsertAfter=s,c.originalEvent=o,e.dispatchEvent(c),u&&(d=u.call(l,c,o)),d}function ta(e){e.draggable=!1}function na(){Ri=!1}function ra(e,t,n){var r=R(Yr(n.el,0,n.options,!0)),i=si(n.el,n.options,G),a=10;return t?e.clientX<i.left-a||e.clientY<r.top&&e.clientX<r.right:e.clientY<i.top-a||e.clientY<r.bottom&&e.clientX<r.left}function ia(e,t,n){var r=R(Xr(n.el,n.options.draggable)),i=si(n.el,n.options,G),a=10;return t?e.clientX>i.right+a||e.clientY>r.bottom&&e.clientX>r.left:e.clientY>i.bottom+a||e.clientX>r.right&&e.clientY>r.top}function aa(e,t,n,r,i,a,o,s){var c=r?e.clientY:e.clientX,l=r?n.height:n.width,u=r?n.top:n.left,d=r?n.bottom:n.right,f=!1;if(!o){if(s&&Ii<l*i){if(!Pi&&(Ni===1?c>u+l*a/2:c<d-l*a/2)&&(Pi=!0),Pi)f=!0;else if(Ni===1?c<u+Ii:c>d-Ii)return-Ni}else if(c>u+l*(1-i)/2&&c<d-l*(1-i)/2)return oa(t)}return f||=o,f&&(c<u+l*a/2||c>d-l*a/2)?c>u+l/2?1:-1:0}function oa(e){return z(U)<z(e)?1:-1}function sa(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,r=0;n--;)r+=t.charCodeAt(n);return r.toString(36)}function ca(e){zi.length=0;for(var t=e.getElementsByTagName(`input`),n=t.length;n--;){var r=t[n];r.checked&&zi.push(r)}}function la(e){return setTimeout(e,0)}function ua(e){return clearTimeout(e)}Bi&&N(document,`touchmove`,function(e){(Q.active||Ci)&&e.cancelable&&e.preventDefault()}),Q.utils={on:N,off:P,css:L,find:Kr,is:function(e,t){return!!F(e,t,e,!1)},extend:ei,throttle:ri,closest:F,toggleClass:I,clone:oi,index:z,nextTick:la,cancelNextTick:ua,detectDirection:Gi,getChild:Yr,expando:B},Q.get=function(e){return e[B]},Q.mount=function(){var e=[...arguments];e[0].constructor===Array&&(e=e[0]),e.forEach(function(e){if(!e.prototype||!e.prototype.constructor)throw`Sortable: Mounted plugin must be a constructor function, not ${{}.toString.call(e)}`;e.utils&&(Q.utils=Dr(Dr({},Q.utils),e.utils)),pi.mount(e)})},Q.create=function(e,t){return new Q(e,t)},Q.version=Nr;var $=[],da,fa,pa=!1,ma,ha,ga,_a;function va(){function e(){for(var e in this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0},this)e.charAt(0)===`_`&&typeof this[e]==`function`&&(this[e]=this[e].bind(this))}return e.prototype={dragStarted:function(e){var t=e.originalEvent;this.sortable.nativeDraggable?N(document,`dragover`,this._handleAutoScroll):this.options.supportPointer?N(document,`pointermove`,this._handleFallbackAutoScroll):t.touches?N(document,`touchmove`,this._handleFallbackAutoScroll):N(document,`mousemove`,this._handleFallbackAutoScroll)},dragOverCompleted:function(e){var t=e.originalEvent;!this.options.dragOverBubble&&!t.rootEl&&this._handleAutoScroll(t)},drop:function(){this.sortable.nativeDraggable?P(document,`dragover`,this._handleAutoScroll):(P(document,`pointermove`,this._handleFallbackAutoScroll),P(document,`touchmove`,this._handleFallbackAutoScroll),P(document,`mousemove`,this._handleFallbackAutoScroll)),ba(),ya(),ii()},nulling:function(){ga=fa=da=pa=_a=ma=ha=null,$.length=0},_handleFallbackAutoScroll:function(e){this._handleAutoScroll(e,!0)},_handleAutoScroll:function(e,t){var n=this,r=(e.touches?e.touches[0]:e).clientX,i=(e.touches?e.touches[0]:e).clientY,a=document.elementFromPoint(r,i);if(ga=e,t||this.options.forceAutoScrollFallback||Ir||Fr||Rr){xa(e,this.options,a,t);var o=$r(a,!0);pa&&(!_a||r!==ma||i!==ha)&&(_a&&ba(),_a=setInterval(function(){var a=$r(document.elementFromPoint(r,i),!0);a!==o&&(o=a,ya()),xa(e,n.options,a,t)},10),ma=r,ha=i)}else{if(!this.options.bubbleScroll||$r(a,!0)===qr()){ya();return}xa(e,this.options,$r(a,!1),!1)}}},Ar(e,{pluginName:`scroll`,initializeByDefault:!0})}function ya(){$.forEach(function(e){clearInterval(e.pid)}),$=[]}function ba(){clearInterval(_a)}var xa=ri(function(e,t,n,r){if(t.scroll){var i=(e.touches?e.touches[0]:e).clientX,a=(e.touches?e.touches[0]:e).clientY,o=t.scrollSensitivity,s=t.scrollSpeed,c=qr(),l=!1,u;fa!==n&&(fa=n,ya(),da=t.scroll,u=t.scrollFn,da===!0&&(da=$r(n,!0)));var d=0,f=da;do{var p=f,m=R(p),h=m.top,g=m.bottom,_=m.left,v=m.right,y=m.width,ee=m.height,b=void 0,x=void 0,S=p.scrollWidth,te=p.scrollHeight,C=L(p),w=p.scrollLeft,T=p.scrollTop;p===c?(b=y<S&&(C.overflowX===`auto`||C.overflowX===`scroll`||C.overflowX===`visible`),x=ee<te&&(C.overflowY===`auto`||C.overflowY===`scroll`||C.overflowY===`visible`)):(b=y<S&&(C.overflowX===`auto`||C.overflowX===`scroll`),x=ee<te&&(C.overflowY===`auto`||C.overflowY===`scroll`));var E=b&&(Math.abs(v-i)<=o&&w+y<S)-(Math.abs(_-i)<=o&&!!w),D=x&&(Math.abs(g-a)<=o&&T+ee<te)-(Math.abs(h-a)<=o&&!!T);if(!$[d])for(var O=0;O<=d;O++)$[O]||($[O]={});($[d].vx!=E||$[d].vy!=D||$[d].el!==p)&&($[d].el=p,$[d].vx=E,$[d].vy=D,clearInterval($[d].pid),(E!=0||D!=0)&&(l=!0,$[d].pid=setInterval(function(){r&&this.layer===0&&Q.active._onTouchMove(ga);var t=$[this.layer].vy?$[this.layer].vy*s:0,n=$[this.layer].vx?$[this.layer].vx*s:0;typeof u==`function`&&u.call(Q.dragged.parentNode[B],n,t,e,ga,$[this.layer].el)!==`continue`||ai($[this.layer].el,n,t)}.bind({layer:d}),24))),d++}while(t.bubbleScroll&&f!==c&&(f=$r(f,!1)));pa=l}},30),Sa=function(e){var t=e.originalEvent,n=e.putSortable,r=e.dragEl,i=e.activeSortable,a=e.dispatchSortableEvent,o=e.hideGhostForTarget,s=e.unhideGhostForTarget;if(t){var c=n||i;o();var l=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:t,u=document.elementFromPoint(l.clientX,l.clientY);s(),c&&!c.el.contains(u)&&(a(`spill`),this.onSpill({dragEl:r,putSortable:n}))}};function Ca(){}Ca.prototype={startIndex:null,dragStart:function(e){this.startIndex=e.oldDraggableIndex},onSpill:function(e){var t=e.dragEl,n=e.putSortable;this.sortable.captureAnimationState(),n&&n.captureAnimationState();var r=Yr(this.sortable.el,this.startIndex,this.options);r?this.sortable.el.insertBefore(t,r):this.sortable.el.appendChild(t),this.sortable.animateAll(),n&&n.animateAll()},drop:Sa},Ar(Ca,{pluginName:`revertOnSpill`});function wa(){}wa.prototype={onSpill:function(e){var t=e.dragEl,n=e.putSortable||this.sortable;n.captureAnimationState(),t.parentNode&&t.parentNode.removeChild(t),n.animateAll()},drop:Sa},Ar(wa,{pluginName:`removeOnSpill`}),Q.mount(new va),Q.mount(wa,Ca);var Ta=Q;function Ea(e,n,r={}){let i,{document:a=D,...o}=r,s={onUpdate:e=>{ka(n,e.oldIndex,e.newIndex,e)}},c=()=>{let t=typeof e==`string`?a?.querySelector(e):f(e);!t||i!==void 0||(i=new Ta(t,{...s,...o}))},l=()=>{i?.destroy(),i=void 0};return x(c),t(l),{stop:l,start:c,option:(e,t)=>{if(t!==void 0)i?.option(e,t);else return i?.option(e)}}}function Da(e,t,n){let r=e.children[n];e.insertBefore(t,r)}function Oa(e){e.parentNode&&e.parentNode.removeChild(e)}function ka(e,t,n,r=null){r!=null&&(Oa(r.item),Da(r.from,r.item,t));let i=ee(e),a=i?[...O(e)]:O(e);if(n>=0&&n<a.length){let r=a.splice(t,1)[0];w(()=>{a.splice(n,0,r),i&&(e.value=a)})}}var Aa={class:`flex flex-col gap-4`},ja={value:`xs`},Ma={value:`sm`},Na={value:`md`},Pa={value:`lg`},Fa={class:`flex flex-col gap-4`},Ia={class:`join flex`},La=[`value`],Ra={class:`flex flex-col gap-2`},za={class:`truncate`},Ba={class:`flex items-center gap-3`},Va={class:`text-sm`},Ha=[`checked`,`onChange`],Ua=e({__name:`ConnectionsSettingsModal`,props:{allColumns:{},untaggedSourceIPs:{}},setup(e,{expose:t}){let n=e,{t:r}=k(),l=ie(),f=A(),p=A(null),_=A(``),v=A(``),b=m({get:()=>{let e=l.connectionsTableColumnOrder,t=n.allColumns.map(e=>e.id),r=e.filter(e=>t.includes(e)),i=t.filter(t=>!e.includes(t));return[...r,...i]},set:e=>{l.connectionsTableColumnOrder=[...e]}});function x(e){return n.allColumns.find(t=>t.id===e)}Ea(p,b,{handle:`.drag-handle`,animation:150});function C(e){l.connectionsTableColumnVisibility={...l.connectionsTableColumnVisibility,[e]:!l.connectionsTableColumnVisibility[e]}}function w(){v.value&&_.value&&(l.clientSourceIPTags.some(e=>e.tagName===v.value||e.sourceIP===_.value)||(l.clientSourceIPTags=[...l.clientSourceIPTags,{tagName:v.value,sourceIP:_.value}]),v.value=``,_.value=``)}function E(e){l.clientSourceIPTags=l.clientSourceIPTags.filter(t=>t.tagName!==e)}function D(){l.connectionsTableColumnVisibility={...j},l.connectionsTableColumnOrder=[...re]}return t({open:()=>f.value?.open(),close:()=>f.value?.close()}),(t,n)=>{let m=Oe,O=ke,k=Ae;return T(),c(k,{ref_key:`modalRef`,ref:f,title:i(r)(`connectionsSettings`)},{icon:y(()=>[u(i(_e),{size:24})]),default:y(()=>[a(`div`,Aa,[a(`div`,null,[u(m,{"with-divider":``},{default:y(()=>[h(S(i(r)(`quickFilter`)),1)]),_:1}),te(a(`input`,{"onUpdate:modelValue":n[0]||=e=>i(l).quickFilterRegex=e,type:`text`,class:`input w-full`,placeholder:`DIRECT|direct|dns-out`},null,512),[[ne,i(l).quickFilterRegex]])]),a(`div`,null,[u(m,{"with-divider":``},{default:y(()=>[h(S(i(r)(`tableSize`)),1)]),_:1}),te(a(`select`,{"onUpdate:modelValue":n[1]||=e=>i(l).connectionsTableSize=e,class:`select w-full`},[a(`option`,ja,S(i(r)(`xs`)),1),a(`option`,Ma,S(i(r)(`sm`)),1),a(`option`,Na,S(i(r)(`md`)),1),a(`option`,Pa,S(i(r)(`lg`)),1)],512),[[d,i(l).connectionsTableSize]])]),a(`div`,null,[u(m,{"with-divider":``},{default:y(()=>[h(S(i(r)(`tagClientSourceIPWithName`)),1)]),_:1}),a(`div`,Fa,[a(`div`,Ia,[te(a(`select`,{"onUpdate:modelValue":n[2]||=e=>ee(_)?_.value=e:null,class:`select join-item`},[n[4]||=a(`option`,{value:``},null,-1),(T(!0),s(o,null,g(e.untaggedSourceIPs,e=>(T(),s(`option`,{key:e,value:e},S(e||i(r)(`inner`)),9,La))),128))],512),[[d,i(_)]]),te(a(`input`,{"onUpdate:modelValue":n[3]||=e=>ee(v)?v.value=e:null,class:`input join-item flex-1`,placeholder:`name`},null,512),[[ne,i(v)]]),u(O,{class:`join-item`,onClick:w},{default:y(()=>[h(S(i(r)(`tag`)),1)]),_:1})]),a(`div`,Ra,[(T(!0),s(o,null,g(i(l).clientSourceIPTags,e=>(T(),s(`div`,{key:e.tagName,class:`badge w-full items-center justify-between gap-2 py-4 badge-primary`},[a(`span`,za,S(e.tagName)+` (`+S(e.sourceIP)+`)`,1),u(O,{class:`btn-circle btn-ghost btn-xs`,onClick:t=>E(e.tagName)},{default:y(()=>[u(i(de),{size:12})]),_:1},8,[`onClick`])]))),128))])])]),a(`div`,null,[u(m,{"with-divider":``},{default:y(()=>[h(S(i(r)(`columns`)),1)]),_:1}),a(`div`,{ref_key:`columnListRef`,ref:p,class:`flex flex-col gap-1`},[(T(!0),s(o,null,g(i(b),e=>(T(),s(`div`,{key:e,class:`flex items-center justify-between gap-2 rounded-lg bg-base-200 px-3 py-2 transition-colors hover:bg-base-300`},[a(`div`,Ba,[u(i(ve),{class:`drag-handle shrink-0 cursor-grab text-base-content/40 transition-colors hover:text-base-content/70 active:cursor-grabbing`,size:16}),a(`span`,Va,S(i(r)(x(e)?.key||e)),1)]),a(`input`,{type:`checkbox`,class:`toggle toggle-primary toggle-sm`,checked:i(l).connectionsTableColumnVisibility[e],onChange:t=>C(e)},null,40,Ha)]))),128))],512)]),u(O,{class:`btn-sm btn-neutral`,onClick:D},{default:y(()=>[h(S(i(r)(`reset`)),1)]),_:1})])]),_:1},8,[`title`])}}}),Wa=Object.assign(Ua,{__name:`ConnectionsSettingsModal`}),Ga=l(Ee(),1),Ka={key:0,class:`flex max-h-[70vh] flex-col gap-4 overflow-x-hidden overflow-y-auto`},qa={class:`rounded-box bg-base-200 p-3`},Ja={class:`mb-2 font-semibold text-primary`},Ya={class:`grid grid-cols-2 gap-x-4 gap-y-1 text-sm`},Xa={class:`min-w-0 font-mono break-all`},Za={class:`text-base-content/70`},Qa={class:`text-base-content/70`},$a={class:`text-base-content/70`},eo={class:`break-all`},to={class:`rounded-box bg-base-200 p-3`},no={class:`mb-2 font-semibold text-primary`},ro={class:`grid grid-cols-2 gap-x-4 gap-y-1 text-sm`},io={class:`text-base-content/70`},ao={class:`text-base-content/70`},oo={class:`text-base-content/70`},so={class:`text-base-content/70`},co={class:`rounded-box bg-base-200 p-3`},lo={class:`mb-2 font-semibold text-primary`},uo={class:`grid grid-cols-2 gap-x-4 gap-y-1 text-sm`},fo={class:`text-base-content/70`},po={class:`text-base-content/70`},mo={class:`text-base-content/70`},ho={class:`break-all`},go={class:`text-base-content/70`},_o={class:`break-all`},vo={class:`text-base-content/70`},yo={class:`rounded-box bg-base-200 p-3`},bo={class:`mb-2 font-semibold text-primary`},xo={class:`grid grid-cols-2 gap-x-4 gap-y-1 text-sm`},So={class:`text-base-content/70`},Co={class:`min-w-0 font-mono break-all`},wo={class:`text-base-content/70`},To={class:`min-w-0 font-mono break-all`},Eo={class:`text-base-content/70`},Do={class:`min-w-0 font-mono break-all`},Oo={class:`rounded-box bg-base-200 p-3`},ko={class:`mb-2 font-semibold text-primary`},Ao={class:`grid grid-cols-2 gap-x-4 gap-y-1 text-sm`},jo={class:`text-base-content/70`},Mo={class:`text-base-content/70`},No={class:`min-w-0 font-mono break-all`},Po={class:`text-base-content/70`},Fo={class:`rounded-box bg-base-200 p-3`},Io={class:`mb-2 font-semibold text-primary`},Lo={class:`grid grid-cols-2 gap-x-4 gap-y-1 text-sm`},Ro={class:`text-base-content/70`},zo={class:`text-base-content/70`},Bo={class:`min-w-0 text-xs break-all`},Vo={class:`rounded-box bg-base-200 p-3`},Ho={class:`mb-2 font-semibold text-primary`},Uo={class:`flex flex-wrap gap-1`},Wo={key:0,class:`rounded-box bg-base-200 p-3`},Go={class:`mb-2 font-semibold text-primary`},Ko={class:`grid grid-cols-2 gap-x-4 gap-y-1 text-sm`},qo={class:`text-base-content/70`},Jo={class:`text-base-content/70`},Yo=e({__name:`ConnectionDetailsModal`,props:{connection:{}},setup(e,{expose:t}){let n=A(),{t:r}=k();return t({open:()=>n.value?.open(),close:()=>n.value?.close()}),(t,l)=>{let d=Ae;return T(),c(d,{ref_key:`modalRef`,ref:n,title:i(r)(`connectionsDetails`)},{icon:y(()=>[u(i(_e),{size:24})]),default:y(()=>[e.connection?(T(),s(`div`,Ka,[a(`div`,qa,[a(`div`,Ja,S(i(r)(`basic`)),1),a(`div`,Ya,[l[0]||=a(`div`,{class:`text-base-content/70`},`ID`,-1),a(`div`,Xa,S(e.connection.id),1),a(`div`,Za,S(i(r)(`start`)),1),a(`div`,null,S(i(Ga.default)(e.connection.start).format(`HH:mm:ss`)),1),a(`div`,Qa,S(i(r)(`rule`)),1),a(`div`,null,S(e.connection.rule),1),a(`div`,$a,S(i(r)(`rulePayload`)),1),a(`div`,eo,S(e.connection.rulePayload||`-`),1)])]),a(`div`,to,[a(`div`,no,S(i(r)(`traffic`)),1),a(`div`,ro,[a(`div`,io,S(i(r)(`download`)),1),a(`div`,null,S(i(we)(e.connection.download)),1),a(`div`,ao,S(i(r)(`upload`)),1),a(`div`,null,S(i(we)(e.connection.upload)),1),a(`div`,oo,S(i(r)(`dlSpeed`)),1),a(`div`,null,S(i(we)(e.connection.downloadSpeed))+`/s`,1),a(`div`,so,S(i(r)(`ulSpeed`)),1),a(`div`,null,S(i(we)(e.connection.uploadSpeed))+`/s`,1)])]),a(`div`,co,[a(`div`,lo,S(i(r)(`metadata`)),1),a(`div`,uo,[a(`div`,fo,S(i(r)(`network`)),1),a(`div`,null,S(e.connection.metadata.network),1),a(`div`,po,S(i(r)(`type`)),1),a(`div`,null,S(e.connection.metadata.type),1),a(`div`,mo,S(i(r)(`host`)),1),a(`div`,ho,S(e.connection.metadata.host||`-`),1),a(`div`,go,S(i(r)(`sniffHost`)),1),a(`div`,_o,S(e.connection.metadata.sniffHost||`-`),1),a(`div`,vo,S(i(r)(`dnsMode`)),1),a(`div`,null,S(e.connection.metadata.dnsMode||`-`),1)])]),a(`div`,yo,[a(`div`,bo,S(i(r)(`sourceAndDestination`)),1),a(`div`,xo,[a(`div`,So,S(i(r)(`source`)),1),a(`div`,Co,S(`${e.connection.metadata.sourceIP}:${e.connection.metadata.sourcePort}`),1),a(`div`,wo,S(i(r)(`destination`)),1),a(`div`,To,S(e.connection.metadata.destinationIP?`${e.connection.metadata.destinationIP}:${e.connection.metadata.destinationPort}`:`${e.connection.metadata.host}:${e.connection.metadata.destinationPort}`),1),a(`div`,Eo,S(i(r)(`remoteDestination`)),1),a(`div`,Do,S(e.connection.metadata.remoteDestination||`-`),1)])]),a(`div`,Oo,[a(`div`,ko,S(i(r)(`inbound`)),1),a(`div`,Ao,[a(`div`,jo,S(i(r)(`inboundName`)),1),a(`div`,null,S(e.connection.metadata.inboundName||`-`),1),a(`div`,Mo,S(i(r)(`inboundIP`)),1),a(`div`,No,S(e.connection.metadata.inboundIP?`${e.connection.metadata.inboundIP}:${e.connection.metadata.inboundPort}`:`-`),1),a(`div`,Po,S(i(r)(`inboundUser`)),1),a(`div`,null,S(e.connection.metadata.inboundUser||`-`),1)])]),a(`div`,Fo,[a(`div`,Io,S(i(r)(`process`)),1),a(`div`,Lo,[a(`div`,Ro,S(i(r)(`processName`)),1),a(`div`,null,S(e.connection.metadata.process||`-`),1),a(`div`,zo,S(i(r)(`processPath`)),1),a(`div`,Bo,S(e.connection.metadata.processPath||`-`),1),l[1]||=a(`div`,{class:`text-base-content/70`},`UID`,-1),a(`div`,null,S(e.connection.metadata.uid||`-`),1)])]),a(`div`,Vo,[a(`div`,Ho,S(i(r)(`chains`)),1),a(`div`,Uo,[(T(!0),s(o,null,g(e.connection.chains,(e,t)=>(T(),s(`span`,{key:t,class:`badge badge-neutral`},S(e),1))),128))])]),e.connection.metadata.specialProxy||e.connection.metadata.specialRules?(T(),s(`div`,Wo,[a(`div`,Go,S(i(r)(`special`)),1),a(`div`,Ko,[a(`div`,qo,S(i(r)(`specialProxy`)),1),a(`div`,null,S(e.connection.metadata.specialProxy||`-`),1),a(`div`,Jo,S(i(r)(`specialRules`)),1),a(`div`,null,S(e.connection.metadata.specialRules||`-`),1)])])):C(``,!0)])):C(``,!0)]),_:1},8,[`title`])}}}),Xo=Object.assign(Yo,{__name:`ConnectionDetailsModal`}),Zo={class:`flex h-full min-h-0 flex-col gap-2`},Qo={class:`flex shrink-0 items-center justify-center md:hidden`},$o={class:`hidden shrink-0 items-center justify-between gap-2 md:flex`},es={class:`flex shrink-0 items-center gap-1.5`},ts=[`value`],ns={class:`text-xs whitespace-nowrap text-base-content/60`},rs=e({__name:`connections`,setup(e){let{t,locale:n}=k();b({title:m(()=>t(`connections`))});let c=Se(),l=ie(),f=A(),p=A(),h=A(null),y=A(`active`),x=A(``),C=r(`enableQuickFilter`,!1),w=A(``),E=r(`connectionsTableSortColumn`,`ConnectTime`),D=r(`connectionsTableSortDesc`,!0),O=r(`connectionsTableGrouping`,null),ne=A({}),j=A(0),re=r(`connectionsTablePageSize`,50),ae=A(!1),se=e=>we(e).toString();function ce(e){return e.metadata.process||e.metadata.processPath?.replace(/^.*[/\\](.*)$/,`$1`)||`-`}function le(e){return`${e.metadata.host||De(e.metadata.destinationIP)}:${e.metadata.destinationPort}`}function ue(e){return e.rulePayload?`${e.rule} : ${e.rulePayload}`:e.rule}function fe(e){let n=e.metadata.sourceIP||t(`inner`);return l.clientSourceIPTags.find(e=>e.sourceIP===n)?.tagName||n}function pe(e){return e.metadata.remoteDestination||e.metadata.destinationIP||e.metadata.host}function me(e){ye(e)}let he=[{id:M.Close,key:`close`,groupable:!1,sortable:!1,render:e=>v(`button`,{class:`btn btn-circle btn-xs`,onClick:t=>{t.stopPropagation(),me(e.id)}},v(de,{size:16}))},{id:M.Type,key:`type`,groupable:!0,sortable:!0,sortId:`Type`,render:e=>`${e.metadata.type}(${e.metadata.network})`,groupValue:e=>`${e.metadata.type}(${e.metadata.network})`},{id:M.Process,key:`process`,groupable:!0,sortable:!0,sortId:`Process`,render:e=>ce(e),groupValue:e=>ce(e)},{id:M.Host,key:`host`,groupable:!0,sortable:!0,sortId:`Host`,render:e=>le(e),groupValue:e=>le(e)},{id:M.SniffHost,key:`sniffHost`,groupable:!0,sortable:!1,render:e=>e.metadata.sniffHost||`-`,groupValue:e=>e.metadata.sniffHost||`-`},{id:M.Rule,key:`rule`,groupable:!0,sortable:!1,render:e=>ue(e),groupValue:e=>ue(e)},{id:M.Chains,key:`chains`,groupable:!0,sortable:!1,render:e=>{let t=[...e.chains].reverse(),n=[];return t.forEach((e,t)=>{t>0&&n.push(v(oe,{class:`inline-block`,size:18})),n.push(v(`span`,{class:`align-middle`},e))}),v(`span`,n)},groupValue:e=>e.chains.join(` > `)},{id:M.ConnectTime,key:`connectTime`,groupable:!1,sortable:!0,sortId:`ConnectTime`,render:e=>Te(e.start,n.value)},{id:M.DlSpeed,key:`dlSpeed`,groupable:!1,sortable:!0,sortId:`DlSpeed`,render:e=>`${se(e.downloadSpeed)}/s`},{id:M.UlSpeed,key:`ulSpeed`,groupable:!1,sortable:!0,sortId:`UlSpeed`,render:e=>`${se(e.uploadSpeed)}/s`},{id:M.Download,key:`dl`,groupable:!1,sortable:!0,sortId:`Download`,render:e=>se(e.download)},{id:M.Upload,key:`ul`,groupable:!1,sortable:!0,sortId:`Upload`,render:e=>se(e.upload)},{id:M.SourceIP,key:`sourceIP`,groupable:!0,sortable:!0,sortId:`SourceIP`,render:e=>fe(e),groupValue:e=>fe(e)},{id:M.SourcePort,key:`sourcePort`,groupable:!1,sortable:!1,render:e=>String(e.metadata.sourcePort)},{id:M.Destination,key:`destination`,groupable:!0,sortable:!1,render:e=>pe(e),groupValue:e=>pe(e)}],ge=m(()=>{let e=l.connectionsTableColumnOrder,t=l.connectionsTableColumnVisibility;return[...he].sort((t,n)=>{let r=e.indexOf(t.id),i=e.indexOf(n.id);return(r===-1?1/0:r)-(i===-1?1/0:i)}).filter(e=>t[e.id]!==!1)}),_e=m(()=>he.filter(e=>e.sortable)),ve=m(()=>[{type:`active`,name:t(`active`),count:c.activeConnections.length},{type:`closed`,name:t(`closed`),count:c.closedConnections.length}]),xe=m(()=>Pn(c.allConnections.map(e=>{let n=e.metadata.sourceIP||t(`inner`);return l.clientSourceIPTags.find(e=>e.sourceIP===n)?.tagName||n})).sort()),Ce=m(()=>Pn(c.allConnections.map(e=>e.metadata.sourceIP)).sort().filter(e=>!l.clientSourceIPTags.some(t=>t.sourceIP===e))),Ee=m(()=>l.tableSizeClassName(l.connectionsTableSize)),Oe=m(()=>{let e=y.value===`active`?c.activeConnections:c.closedConnections;if(C.value&&l.quickFilterRegex)try{let t=new RegExp(l.quickFilterRegex,`i`);e=e.filter(e=>!e.chains.some(e=>t.test(e)))}catch{}if(w.value&&(e=e.filter(e=>{let n=e.metadata.sourceIP||t(`inner`);return(l.clientSourceIPTags.find(e=>e.sourceIP===n)?.tagName||n)===w.value})),x.value){let t=x.value.toLowerCase();e=e.filter(e=>e.metadata.host?.toLowerCase().includes(t)||e.metadata.process?.toLowerCase().includes(t)||e.metadata.sourceIP?.toLowerCase().includes(t)||e.rule?.toLowerCase().includes(t)||e.chains.some(e=>e.toLowerCase().includes(t)))}return[...e].sort((e,t)=>{let n=0;switch(E.value){case`ConnectTime`:n=new Date(e.start).getTime()-new Date(t.start).getTime();break;case`DlSpeed`:n=e.downloadSpeed-t.downloadSpeed;break;case`UlSpeed`:n=e.uploadSpeed-t.uploadSpeed;break;case`Download`:n=e.download-t.download;break;case`Upload`:n=e.upload-t.upload;break;case`Host`:n=(e.metadata.host||``).localeCompare(t.metadata.host||``);break;case`Type`:n=e.metadata.type.localeCompare(t.metadata.type);break;case`Process`:n=(e.metadata.process||``).localeCompare(t.metadata.process||``);break;case`SourceIP`:n=(e.metadata.sourceIP||``).localeCompare(t.metadata.sourceIP||``);break}return D.value?-n:n})}),ke=m(()=>Math.max(1,Math.ceil(Oe.value.length/re.value))),Ae=m(()=>{let e=j.value,t=ke.value,n=[];n.push(0);for(let r=Math.max(1,e-1);r<=Math.min(t-2,e+1);r++)n.includes(r)||n.push(r);return t>1&&!n.includes(t-1)&&n.push(t-1),n.sort((e,t)=>e-t)}),je=m(()=>{let e=j.value*re.value;return Oe.value.slice(e,e+re.value)}),Me=m(()=>{let e=Oe.value.length;return`${j.value*re.value+1}-${Math.min((j.value+1)*re.value,e)} / ${e}`});_([y,x,w,C],()=>{j.value=0});let Ne=m(()=>O.value?he.find(e=>e.id===O.value):null),Pe=m(()=>{let e=Ne.value;if(!e?.groupValue)return je.value.map(e=>({type:`data`,original:e,depth:0}));let t=new Map;for(let n of Oe.value){let r=e.groupValue(n),i=t.get(r);i?i.push(n):t.set(r,[n])}let n=[];for(let[e,r]of t)if(n.push({type:`group`,key:e,depth:0,subRows:r}),ne.value[e])for(let e of r)n.push({type:`data`,original:e,depth:1});return n});function Fe(e){let t=he.find(t=>t.id===e);!t?.sortable||!t.sortId||(E.value===t.sortId?D.value?D.value=!1:(E.value=``,D.value=!0):(E.value=t.sortId,D.value=!0))}function Ie(e){O.value===e?O.value=null:O.value=e,ne.value={}}function Le(e){ne.value[e]=!ne.value[e]}function Re(){D.value=!D.value}async function ze(){ae.value=!0;try{x.value?await Promise.allSettled(Oe.value.map(e=>ye(e.id))):await be()}finally{ae.value=!1}}function Be(e){h.value=e,p.value?.open()}return(e,t)=>{let n=er,r=lr,l=Tr,m=Wa,_=Xo;return T(),s(`div`,Zo,[u(n,{class:`shrink-0`,tabs:i(ve),"active-tab":i(y),"enable-quick-filter":i(C),"source-i-p-filter":i(w),"unique-source-i-ps":i(xe),"sort-column":i(E),"sort-desc":i(D),"sortable-columns":i(_e),"global-filter":i(x),paused:i(c).paused,"is-closing-connections":i(ae),"onUpdate:activeTab":t[0]||=e=>y.value=e,"onUpdate:enableQuickFilter":t[1]||=e=>C.value=e,"onUpdate:sourceIPFilter":t[2]||=e=>w.value=e,"onUpdate:sortColumn":t[3]||=e=>E.value=e,"onUpdate:globalFilter":t[4]||=e=>x.value=e,onToggleSortOrder:Re,onTogglePaused:t[5]||=e=>i(c).paused=!i(c).paused,onCloseConnections:ze,onOpenSettings:t[6]||=e=>i(f)?.open()},null,8,[`tabs`,`active-tab`,`enable-quick-filter`,`source-i-p-filter`,`unique-source-i-ps`,`sort-column`,`sort-desc`,`sortable-columns`,`global-filter`,`paused`,`is-closing-connections`]),a(`div`,Qo,[u(r,{"current-page":i(j),"total-pages":i(ke),"visible-pages":i(Ae),onGoToPage:t[7]||=e=>j.value=e,onPrevious:t[8]||=e=>j.value--,onNext:t[9]||=e=>j.value++},null,8,[`current-page`,`total-pages`,`visible-pages`])]),u(l,{columns:i(ge),"row-model":i(Pe),"sort-column":i(E),"sort-desc":i(D),"grouping-column":i(O),"expanded-groups":i(ne),"table-size-class":i(Ee),onHeaderClick:Fe,onToggleGrouping:Ie,onToggleGroupExpanded:Le,onRowClick:Be},null,8,[`columns`,`row-model`,`sort-column`,`sort-desc`,`grouping-column`,`expanded-groups`,`table-size-class`]),a(`div`,$o,[a(`div`,es,[te(a(`select`,{"onUpdate:modelValue":t[10]||=e=>ee(re)?re.value=e:null,class:`select-bordered select select-xs`},[(T(),s(o,null,g([20,50,100,200],e=>a(`option`,{key:e,value:e},S(e),9,ts)),64))],512),[[d,i(re),void 0,{number:!0}]]),a(`span`,ns,S(i(Me)),1)]),u(r,{"current-page":i(j),"total-pages":i(ke),"visible-pages":i(Ae),onGoToPage:t[11]||=e=>j.value=e,onPrevious:t[12]||=e=>j.value--,onNext:t[13]||=e=>j.value++},null,8,[`current-page`,`total-pages`,`visible-pages`])]),u(m,{ref_key:`settingsModal`,ref:f,"all-columns":he,"untagged-source-i-ps":i(Ce)},null,8,[`untagged-source-i-ps`]),u(_,{ref_key:`detailsModal`,ref:p,connection:i(h)},null,8,[`connection`])])}}});export{rs as default};